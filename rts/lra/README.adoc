## Build everything and run integration tests

```bash
mvn clean install
```

## Test the LRA coodinator using Arquillian:

```bash
mvn -f lra-coordinator/pom.xml -DskipTests=false verify
```

(if you need to debug the integration test then use -Dmaven.failsafe.debug).

## View the swagger documentation for the LRA coordinator

Make sure the LRA coordinator is running:

```bash
mvn -f lra-coordinator/pom.xml wildfly-swarm:run -DskipTests -Dswarm.http.port=8080
```

Now point your browser at http://localhost:8080/swagger.json (or use a tool such as curl):
you should see a json representation of the API. A pretty version is available via the swagger ui:

- copy the output from http://localhost:8080/swagger.json into a local file
- go to http://editor.swagger.io/#/ and use the file menu to import this file into the UI

## Run an integration test

### Start the org.jboss.narayana.rts.lra.coordinator on port 8080

```bash
mvn -f lra-coordinator/pom.xml wildfly-swarm:run -DskipTests -Dswarm.http.port=8080
```

### Start a service on port 8081

```bash
mvn -f lra-test/pom.xml clean wildfly-swarm:run -DskipTests -Dswarm.http.port=8081 -Dlra.http.port=8080
```

The system property *lra.http.port* specifies the port on which the LRA coordinator is listening.

(If you want to enable source level debugging use -Dswarm.debug.port=<port>).

### Run the test suite against the coordinator and participant running on ports 8080
and 8081, respectively

```bash
mvn test -f lra-client/pom.xml -Dtest=SpecTest -DskipTests=false -Dlra.http.port=8080 -Dservice.http.port=8081
```

The system properties *lra.http.port* and *service.http.port* specify the ports on which the LRA coordinator and example service are is listening, respectively.

